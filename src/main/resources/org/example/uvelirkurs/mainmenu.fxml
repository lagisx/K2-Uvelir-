<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.12" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="org.example.uvelirkurs.controllers.MainController"
            styleClass="main-background"
            stylesheets="@styles.css">

    <top>
        <VBox styleClass="top-bar">
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox alignment="CENTER_LEFT" spacing="2">
                    <Label text="ðŸ’Ž Uvelir Shop" styleClass="label-title"/>
                    <Label text="Ð®Ð²ÐµÐ»Ð¸Ñ€Ð½Ñ‹Ðµ ÑƒÐºÑ€Ð°ÑˆÐµÐ½Ð¸Ñ" styleClass="label-small"/>
                </VBox>

                <Region HBox.hgrow="ALWAYS"/>

                <TextField promptText="ðŸ” ÐŸÐ¾Ð¸ÑÐº ÑƒÐºÑ€Ð°ÑˆÐµÐ½Ð¸Ð¹..." 
                          styleClass="text-field"
                          prefWidth="350"/>

                <Button fx:id="ordersButton"
                        text="ðŸ“‹ ÐœÐ¾Ð¸ Ð·Ð°ÐºÐ°Ð·Ñ‹"
                        styleClass="button-secondary"
                        prefWidth="140"/>

                <StackPane>
                    <Button fx:id="cartButton"
                            text="ðŸ›’"
                            styleClass="button-primary"
                            prefWidth="60"/>
                    
                    <StackPane translateX="20" translateY="-12" mouseTransparent="true">
                        <Circle radius="11" style="-fx-fill: #e74c3c;"/>
                        <Label fx:id="cartBadge"
                               text="0"
                               visible="false"
                               style="-fx-text-fill: white; -fx-font-size: 11px; -fx-font-weight: bold;"/>
                    </StackPane>
                </StackPane>

                <Button fx:id="profileButton"
                        text="ðŸ‘¤ ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ"
                        styleClass="button-primary"
                        prefWidth="120"/>
            </HBox>
            
            <Region styleClass="separator-line"/>
        </VBox>
    </top>

    <left>
        <VBox spacing="0" 
              prefWidth="240" 
              style="-fx-background-color: white; -fx-padding: 20 15; -fx-border-color: #e0e0e0; -fx-border-width: 0 1 0 0;">
            
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 10 15 10;">
                <Label text="ðŸ“‚" style="-fx-font-size: 18px;"/>
                <Label text="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸" styleClass="label-subtitle"/>
            </HBox>
            
            <Separator styleClass="separator-line">
                <VBox.margin>
                    <Insets bottom="10"/>
                </VBox.margin>
            </Separator>

            <ScrollPane fitToWidth="true" 
                       styleClass="scroll-pane"
                       VBox.vgrow="ALWAYS">
                <VBox fx:id="categoriesBox" 
                      spacing="6" 
                      style="-fx-padding: 5 0;"/>
            </ScrollPane>
        </VBox>
    </left>

    <center>
        <VBox styleClass="main-background">
            <ScrollPane fitToWidth="true" 
                       fitToHeight="true"
                       styleClass="scroll-pane"
                       VBox.vgrow="ALWAYS">
                
                <VBox spacing="20" style="-fx-padding: 25;">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label text="ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²" styleClass="label-title"/>
                        <Label fx:id="productCountLabel"
                               text="0 Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²"
                               styleClass="label-subtitle"/>
                    </HBox>
                    
                    <FlowPane fx:id="productsPane" 
                             hgap="20" 
                             vgap="20"
                             prefWrapLength="1000"
                             alignment="TOP_LEFT"/>
                </VBox>
            </ScrollPane>
        </VBox>
    </center>

    <StackPane fx:id="loadingOverlay" visible="false" 
               style="-fx-background-color: rgba(0,0,0,0.3);">
        <ProgressIndicator fx:id="loadingIndicator"/>
    </StackPane>

</BorderPane>
